{% extends 'base.html' %}

{% block head %}
  
{# jQuery #}
<script src="https://code.jquery.com/jquery-3.4.1.js" integrity="sha256-WpOohJOqMqqyKL9FccASB9O0KwACQJpFTUBLTYOVvVU=" crossorigin></script>

{# Moment: allows you to use time scales. If you want to use time scales,
     you have to import Moment BEFORE Chart.js #}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>

{# ChartJS #}
<script crossorigin src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.js"></script>

{# randomColor: generate random colors #}
<script src="https://cdnjs.cloudflare.com/ajax/libs/randomcolor/0.5.4/randomColor.min.js"></script>

{% endblock %}


{% block body %}

<h2>Solar Data Vizualization</h2>
  <p><a href="/">go to the home page</a></p>

<h2>Yearly Production Data for All Utilities - Jinja</h2> 
  <p>Showing table data that was implemented with Jinja</p>
  <table class="showing_solar_data" id="YPT">
    <tr>
      <th>
          year
      </th>
      <th>
          production
      </th>
    </tr>
    {% for year, production in production_by_year.items() %}
    <tr>
      <td>
        {{ year }}
      </td>
      <td>
        {{production}} kWh
      </td>
    </tr>
    {% endfor %}
  </table>

<h4>Congratulations Johanna on completing your MVP!</h4>

<h2>Yearly Production Data for All Utilities - chart.js</h2>

<div id="site content">
 <!--  <p>1. Practicing a basic bar chart with Chart.js</p>
  <canvas id="basic-bar-chart"></canvas> -->

  <p>Practicing a bar chart with dates in Chart.js</p>
  <canvas id="bar-chart2"></canvas>
  
  <!-- <p>3. Practicing a bar chart with solar data in Chart.js</p>
  <canvas id="bar-chart3"></canvas>

  <p>4. Practicing a bar chart with solar data in Chart.js</p>
  <canvas id="bar-chart4"></canvas> -->
</div>

{% endblock %}


{% block js %}
<!-- <script src="/static/js/basic_bar_chart.js"></script> -->
<!-- <script src="/static/js/bar-chart-two.js"></script> -->
<!-- <script src="/static/js/bar_chart-three.js"></script> -->
<!-- <script src="/static/js//bar_chart4.js"></script> -->

<script>

const yearly_labels = ["2007", "2011", "2014", "2015", "2016", "2018", "2019"]
const yearly_datasets = [{"x": "2007", "y": 151.24}, {"x": "2011", "y": 22.302}, {"x": "2014", "y": 0.301}, {"x": "2015", "y": 6.49}, {"x": "2016", "y": 103.458}, {"x": "2018", "y": 62.918}, {"x": "2019", "y": 18.356}]


const barChartTwo = new Chart(
  $('#bar-chart2'),
  {
    type: 'bar',
    data: {
      labels: yearly_labels,
      datasets: [
        {
          label: 'Annual Solar Energy Generation (GWh)',
          data: yearly_datasets
        },
      ]
    },
    options: {
      datasets: {
        bar: {
          // We use a function to automatically set the background color of
          // each bar in the bar chart.
          //
          // There are many other properties that accept functions. For more
          // information see: https://www.chartjs.org/docs/latest/general/options.html#scriptable-options
          backgroundColor: () => {
            // `randomColor` is a JS module we found off GitHub: https://github.com/davidmerfield/randomColor
            // We imported it in templates/chartjs.html
            return randomColor();
          }
        }
      },
      scales: {
            xAxes: [{
                type: 'time',
                time: {
                    unit: 'year'
                }
            }],
            yAxes: [
          {
            ticks: {
              min: 0,
              max: 200
            }
          },
        ]
        }
    }
  }
);
</script>

{% endblock %}

<!-- check out this example in the documentation
https://www.chartjs.org/docs/latest/axes/cartesian/time.html#time-cartesian-axis -->